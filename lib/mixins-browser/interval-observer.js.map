{"version":3,"sources":["../../src/mixins-browser/interval-observer.ts"],"names":[],"mappings":"6GAAA,wD;;AAEO,MAAM,gBAAN,CAAuB;;;;;AAK5B,EAAA,WAAW,CAAC,EAAD,EAAK,8BAJV,SAIU,kCAFP,EAEO;AACd,SAAK,GAAL,GAAW,EAAX;AACD;;AAED,EAAA,OAAO,CAAC,EAAC,QAAD,EAAD,EAAmB;AACxB,QAAI,UAAU,GAAG,gBAAE,IAAF,CAAO,KAAK,MAAZ,EAAoB;AACnC,MAAA,QADmC,EAApB,CAAjB;;AAGA,QAAI,WAAW,GAAG,CAAC,gBAAE,WAAF,CAAc,UAAd,CAAnB;AACA,QAAI,WAAJ,EAAiB;AACf;AACD;AACD,QAAI,UAAU,GAAG,WAAW,CAAC,MAAM;AACjC,UAAI,OAAO,GAAG,CAAC;AACb,QAAA,QADa,EAAD,CAAd;;AAGA,WAAK,GAAL,CAAS,OAAT;AACD,KAL2B,EAKzB,QALyB,CAA5B;AAMA,SAAK,MAAL,CAAY,IAAZ,CAAiB;AACf,MAAA,QADe;AAEf,MAAA,UAFe,EAAjB;;AAID;;AAED,EAAA,SAAS,CAAC,EAAC,QAAD,EAAD,EAAmB;AAC1B,QAAI,UAAU,GAAG,gBAAE,IAAF,CAAO,KAAK,MAAZ,EAAoB;AACnC,MAAA,QADmC,EAApB,CAAjB;;AAGA,QAAI,WAAW,GAAG,CAAC,gBAAE,WAAF,CAAc,UAAd,CAAnB;AACA,QAAI,CAAC,WAAL,EAAkB;AAChB;AACD;AACD,IAAA,aAAa,CAAC,UAAU,CAAC,UAAZ,CAAb;AACA;AACA,oBAAE,IAAF,CAAO,KAAK,MAAZ,EAAoB,UAApB;AACD;;AAED,EAAA,UAAU,GAAS;AACjB,oBAAE,OAAF,CAAU,KAAK,MAAf,EAAuB,CAAC,EAAC,QAAD,EAAD,KAAgB;AACrC,WAAK,SAAL,CAAe,QAAf;AACD,KAFD;AAGD,GA9C2B,C","file":"interval-observer.js","sourcesContent":["import _ from 'lodash';\n\nexport class IntervalObserver {\n  _cb = undefined;\n\n  _cache = [];\n\n  constructor(cb) {\n    this._cb = cb;\n  }\n\n  observe({interval}): void {\n    let cacheEntry = _.find(this._cache, {\n      interval\n    });\n    let isObserving = !_.isUndefined(cacheEntry);\n    if (isObserving) {\n      return;\n    }\n    let intervalId = setInterval(() => {\n      let entries = [{\n        interval\n      }];\n      this._cb(entries);\n    }, interval);\n    this._cache.push({\n      interval,\n      intervalId\n    });\n  }\n\n  unobserve({interval}): void {\n    let cacheEntry = _.find(this._cache, {\n      interval\n    });\n    let isObserving = !_.isUndefined(cacheEntry);\n    if (!isObserving) {\n      return;\n    }\n    clearInterval(cacheEntry.intervalId);\n    // eslint-disable-next-line lodash/prefer-immutable-method\n    _.pull(this._cache, cacheEntry);\n  }\n\n  disconnect(): void {\n    _.forEach(this._cache, ({interval}) => {\n      this.unobserve(interval);\n    });\n  }\n}\n"]}