{"version":3,"sources":["../src/promisify.js"],"names":[],"mappings":";;;;;AAAO,IAAI,gCAAY,UAAS,MAAT,EAAiB;AACtC,kBAAgB,KADsB;AAEtC,oBAAkB;AAFoB,IAGpC,EAHmB,EAGf;AACN,SAAO,UAAS,GAAG,IAAZ,EAAkB;AACvB,WAAO,IAAI,OAAJ,CAAY,UAAS,OAAT,EAAkB,MAAlB,EAA0B;AAC3C,UAAI,WAAW,UAAS,GAAG,OAAZ,EAAqB;AAClC,YAAI,eAAJ,EAAqB;AACnB,cAAI,MAAM,QAAQ,KAAR,EAAV;AACA,cAAI,GAAJ,EAAS;AACP,mBAAO,GAAP;AACA;AACD;AACF;;AAED,gBAAQ,QAAQ,MAAhB;AACA,eAAK,CAAL;AACE;AACA;;AAEF,eAAK,CAAL;AACE,oBAAQ,QAAQ,CAAR,CAAR;AACA;;AAEF;AACE,oBAAQ,OAAR;AACA;AAXF;AAaD,OAtBD;;AAwBA,UAAI,aAAJ,EAAmB;AACjB,aAAK,OAAL,CAAa,QAAb;AACD,OAFD,MAEO;AACL,aAAK,IAAL,CAAU,QAAV;AACD;AACD,aAAO,GAAG,IAAV;AACD,KA/BM,CAAP;AAgCD,GAjCD;AAkCD,CAtCM","file":"promisify.js","sourcesContent":["export let promisify = function(origFn, {\n  callbackFirst = false,\n  errorInCallback = true\n} = {}) {\n  return function(...args) {\n    return new Promise(function(resolve, reject) {\n      let callback = function(...results) {\n        if (errorInCallback) {\n          let err = results.shift();\n          if (err) {\n            reject(err);\n            return;\n          }\n        }\n\n        switch (results.length) {\n        case 0:\n          resolve();\n          break;\n\n        case 1:\n          resolve(results[0]);\n          break;\n\n        default:\n          resolve(results);\n          break;\n        }\n      };\n\n      if (callbackFirst) {\n        args.unshift(callback);\n      } else {\n        args.push(callback);\n      }\n      origFn(...args);\n    });\n  };\n};\n\nexport default promisify;\n"]}