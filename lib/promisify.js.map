{"version":3,"sources":["../src/promisify.js"],"names":[],"mappings":"wHAAO,IAAI,SAAS,GAAG,UAAS,MAAT,EAAiB;AACtC,EAAA,aAAa,GAAG,KADsB;AAEtC,EAAA,eAAe,GAAG,IAFoB;AAGpC,EAHmB,EAGf;AACN,SAAO,UAAS,GAAG,IAAZ,EAAkB;AACvB,WAAO,IAAI,OAAJ,CAAY,UAAS,OAAT,EAAkB,MAAlB,EAA0B;AAC3C,UAAI,QAAQ,GAAG,UAAS,GAAG,OAAZ,EAAqB;AAClC,YAAI,eAAJ,EAAqB;AACnB,cAAI,GAAG,GAAG,OAAO,CAAC,KAAR,EAAV;AACA,cAAI,GAAJ,EAAS;AACP,YAAA,MAAM,CAAC,GAAD,CAAN;AACA;AACD;AACF;;AAED,gBAAQ,OAAO,CAAC,MAAhB;AACA,eAAK,CAAL;AACE,YAAA,OAAO;AACP;;AAEF,eAAK,CAAL;AACE,YAAA,OAAO,CAAC,OAAO,CAAC,CAAD,CAAR,CAAP;AACA;;AAEF;AACE,YAAA,OAAO,CAAC,OAAD,CAAP;AACA,kBAXF;;AAaD,OAtBD;;AAwBA,UAAI,aAAJ,EAAmB;AACjB,QAAA,IAAI,CAAC,OAAL,CAAa,QAAb;AACD,OAFD,MAEO;AACL,QAAA,IAAI,CAAC,IAAL,CAAU,QAAV;AACD;AACD,MAAA,MAAM,CAAC,GAAG,IAAJ,CAAN;AACD,KA/BM,CAAP;AAgCD,GAjCD;AAkCD,CAtCM,C","file":"promisify.js","sourcesContent":["export let promisify = function(origFn, {\n  callbackFirst = false,\n  errorInCallback = true\n} = {}) {\n  return function(...args) {\n    return new Promise(function(resolve, reject) {\n      let callback = function(...results) {\n        if (errorInCallback) {\n          let err = results.shift();\n          if (err) {\n            reject(err);\n            return;\n          }\n        }\n\n        switch (results.length) {\n        case 0:\n          resolve();\n          break;\n\n        case 1:\n          resolve(results[0]);\n          break;\n\n        default:\n          resolve(results);\n          break;\n        }\n      };\n\n      if (callbackFirst) {\n        args.unshift(callback);\n      } else {\n        args.push(callback);\n      }\n      origFn(...args);\n    });\n  };\n};\n\nexport default promisify;\n"]}