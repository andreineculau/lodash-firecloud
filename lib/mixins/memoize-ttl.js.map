{"version":3,"sources":["../../src/mixins/memoize-ttl.js"],"names":[],"mappings":"uGAAO,IAAI,UAAU,GAAG,UAAS,GAAT,EAAc,EAAd,EAAkB,QAAlB,EAA4B;AAClD;AACA,MAAI,CAAC,GAAG,IAAR;;AAEA,MAAI,QAAQ,GAAG,UAAS,GAAG,IAAZ,EAAkB;AAC/B,QAAI,GAAG,GAAG,CAAC,CAAC,SAAF,CAAY,QAAZ,IAAwB,QAAQ,CAAC,GAAG,IAAJ,CAAhC,GAA4C,CAAC,CAAC,IAAF,CAAO,IAAP,CAAtD;AACA,QAAI;AACF,MAAA,KADE;AAEA,IAAA,QAFJ;;AAIA,QAAI,KAAK,CAAC,GAAN,CAAU,GAAV,CAAJ,EAAoB;AAClB,UAAI;AACF,QAAA,KADE;AAEF,QAAA,OAFE;AAGA,MAAA,KAAK,CAAC,GAAN,CAAU,GAAV,CAHJ;;AAKA,UAAI,OAAO,GAAG,IAAI,CAAC,GAAL,EAAd,EAA0B;AACxB,eAAO,KAAP;AACD;AACF;;AAED,QAAI,KAAK,GAAG,EAAE,CAAC,GAAG,IAAJ,CAAd;AACA,QAAI,OAAO,GAAG,IAAI,CAAC,GAAL,KAAa,GAA3B;AACA,IAAA,QAAQ,CAAC,KAAT,GAAiB,KAAK,CAAC,GAAN,CAAU,GAAV,EAAe;AAC9B,MAAA,KAD8B;AAE9B,MAAA,OAF8B,EAAf;AAGX,IAAA,KAHN;;AAKA,WAAO,KAAP;AACD,GAzBD;AA0BA,EAAA,QAAQ,CAAC,KAAT,GAAiB,KAAK,UAAU,CAAC,KAAX,IAAoB,GAAzB,GAAjB;AACA,SAAO,QAAP;AACD,CAhCM,C;;AAkCP,mBAAW,KAAX,GAAmB,GAAnB","file":"memoize-ttl.js","sourcesContent":["export let memoizeTtl = function(ttl, fn, resolver) {\n  // eslint-disable-next-line consistent-this, babel/no-invalid-this\n  let _ = this;\n\n  let memoized = function(...args) {\n    let key = _.isDefined(resolver) ? resolver(...args) : _.head(args);\n    let {\n      cache\n    } = memoized;\n\n    if (cache.has(key)) {\n      let {\n        value,\n        expires\n      } = cache.get(key);\n\n      if (expires > Date.now()) {\n        return value;\n      }\n    }\n\n    let value = fn(...args);\n    let expires = Date.now() + ttl;\n    memoized.cache = cache.set(key, {\n      value,\n      expires\n    }) || cache;\n\n    return value;\n  };\n  memoized.cache = new (memoizeTtl.Cache || Map)();\n  return memoized;\n};\n\nmemoizeTtl.Cache = Map;\n"]}