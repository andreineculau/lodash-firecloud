{"version":3,"sources":["../../src/mixins/promisify.js"],"names":[],"mappings":"yHAAA;;AAEO,IAAI,SAAS,GAAG,UAAS,MAAT,EAAiB;AACtC,EAAA,aAAa,GAAG,KADsB;AAEtC,EAAA,eAAe,GAAG,IAFoB;AAGpC,EAHmB,EAGf;AACN,MAAI,EAAE,GAAG,UAAS,GAAG,IAAZ,EAAkB;AACzB,WAAO,IAAI,OAAJ,CAAY,UAAS,OAAT,EAAkB,MAAlB,EAA0B;AAC3C,UAAI,QAAQ,GAAG,UAAS,GAAG,OAAZ,EAAqB;AAClC,YAAI,eAAJ,EAAqB;AACnB,cAAI,GAAG,GAAG,OAAO,CAAC,KAAR,EAAV;AACA,cAAI,GAAJ,EAAS;AACP,YAAA,MAAM,CAAC,GAAD,CAAN;AACA;AACD;AACF;;AAED,gBAAQ,OAAO,CAAC,MAAhB;AACA,eAAK,CAAL;AACE,YAAA,OAAO;AACP;;AAEF,eAAK,CAAL;AACE,YAAA,OAAO,CAAC,OAAO,CAAC,CAAD,CAAR,CAAP;AACA;;AAEF;AACE,YAAA,OAAO,CAAC,OAAD,CAAP;AACA,kBAXF;;AAaD,OAtBD;;AAwBA,UAAI,aAAJ,EAAmB;AACjB,QAAA,IAAI,CAAC,OAAL,CAAa,QAAb;AACD,OAFD,MAEO;AACL,QAAA,IAAI,CAAC,IAAL,CAAU,QAAV;AACD;AACD,MAAA,MAAM,CAAC,GAAG,IAAJ,CAAN;AACD,KA/BM,CAAP;AAgCD,GAjCD;;AAmCA,EAAA,MAAM,CAAC,cAAP,CAAsB,EAAtB,EAA0B,MAAM,CAAC,cAAP,CAAsB,MAAtB,CAA1B;AACA,EAAA,MAAM,CAAC,gBAAP,CAAwB,EAAxB,EAA4B,MAAM,CAAC,yBAAP,CAAiC,MAAjC,CAA5B;;AAEA,SAAO,EAAP;AACD,CA3CM,C","file":"promisify.js","sourcesContent":["// NOTE follows closely Node.js util.promisify\n\nexport let promisify = function(origFn, {\n  callbackFirst = false,\n  errorInCallback = true\n} = {}) {\n  let fn = function(...args) {\n    return new Promise(function(resolve, reject) {\n      let callback = function(...results) {\n        if (errorInCallback) {\n          let err = results.shift();\n          if (err) {\n            reject(err);\n            return;\n          }\n        }\n\n        switch (results.length) {\n        case 0:\n          resolve();\n          break;\n\n        case 1:\n          resolve(results[0]);\n          break;\n\n        default:\n          resolve(results);\n          break;\n        }\n      };\n\n      if (callbackFirst) {\n        args.unshift(callback);\n      } else {\n        args.push(callback);\n      }\n      origFn(...args);\n    });\n  };\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(origFn));\n  Object.defineProperties(fn, Object.getOwnPropertyDescriptors(origFn));\n\n  return fn;\n};\n\nexport default promisify;\n"]}