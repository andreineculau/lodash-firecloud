{"version":3,"sources":["../../src/mixins/throttle-exp.js"],"names":[],"mappings":";AACO,IAAI,WAAW,GAAG,UAAS,EAAT,EAAa,IAAb,EAAmB,OAAO,GAAG,EAA7B,EAAiC;AACxD;AACA,MAAI,CAAC,GAAG,IAAR;;AAEA,EAAA,CAAC,CAAC,QAAF,CAAW,OAAX,EAAoB;AAClB,IAAA,OAAO,EAAE,IADS;AAElB,IAAA,QAAQ,EAAE,IAFQ;AAGlB,IAAA,UAAU,EAAE,CAHM;AAIlB,IAAA,OAAO,EAAE,QAJS;AAKlB,IAAA,OAAO,EAAE,QALS,EAApB;;;AAQA,MAAI,KAAJ;AACA,MAAI,UAAJ;AACA,MAAI,QAAJ;;AAEA,MAAI;AACF,IAAA,OADE;AAEF,IAAA,QAFE;AAGF,IAAA,UAHE;AAIF,IAAA,OAJE;AAKF,IAAA,OALE;AAMA,EAAA,OANJ;;AAQA,MAAI,OAAJ;AACA,MAAI,YAAY,GAAG,KAAnB;;AAEA,MAAI,QAAQ,GAAG,YAAW;AACxB,QAAI;AACF,MAAA,QADE;AAEF,MAAA,QAFE;AAGA,IAAA,QAHJ;;AAKA,IAAA,QAAQ,GAAG,SAAX;;AAEA,IAAA,UAAU,GAAG,EAAE,CAAC,KAAH,CAAS,QAAT,EAAmB,QAAnB,CAAb;AACD,GATD;;AAWA,MAAI,UAAU,GAAG,YAAW;AAC1B,IAAA,QAAQ;AACR,QAAI,OAAJ,EAAa;AACX,MAAA,QAAQ;AACT;AACF,GALD;;AAOA,MAAI,WAAW,GAAG,YAAW;AAC3B,QAAI,QAAQ,IAAI,QAAhB,EAA0B;AACxB,MAAA,QAAQ;AACR,MAAA,QAAQ;AACT;AACF,GALD;;AAOA,MAAI,UAAU,GAAG,YAAW;AAC1B,QAAI,CAAC,KAAL,EAAY;AACV;AACD;;AAED,IAAA,YAAY,CAAC,KAAD,CAAZ;AACA,IAAA,KAAK,GAAG,SAAR;AACD,GAPD;;AASA,MAAI,OAAO,GAAG,YAAW;AACvB,IAAA,UAAU;AACV,IAAA,WAAW;AACZ,GAHD;;AAKA,MAAI,QAAQ,GAAG,YAAW;AACxB,QAAI,KAAJ,EAAW;AACT;AACD;;AAED,QAAI,CAAC,OAAL,EAAc;AACZ,MAAA,OAAO,GAAG,IAAV,CADY,CACI;AACjB,KAFD,MAEO,IAAI,YAAJ,EAAkB;AACvB,MAAA,OAAO,GAAG,OAAO,GAAG,UAApB;AACD,KAFM,MAEA;AACL,MAAA,OAAO,GAAG,OAAO,GAAG,OAApB;AACD;;AAED,IAAA,YAAY,GAAG,KAAf;;AAEA,IAAA,OAAO,GAAG,CAAC,CAAC,KAAF,CAAQ,OAAR,EAAiB,IAAjB,EAAuB,OAAvB,CAAV;;AAEA,IAAA,KAAK,GAAG,UAAU,CAAC,OAAD,EAAU,OAAV,CAAlB;AACD,GAlBD;;AAoBA,MAAI,WAAW,GAAG,UAAS,GAAG,IAAZ,EAAkB;AAClC,IAAA,QAAQ,GAAG;AACT;AACA,MAAA,QAAQ,EAAE,IAFD;AAGT,MAAA,QAAQ,EAAE,IAHD,EAAX;;;AAMA,QAAI,KAAJ,EAAW;AACT,MAAA,YAAY,GAAG,IAAf;AACA,aAAO,UAAP;AACD;;AAED,IAAA,UAAU;;AAEV,WAAO,UAAP;AACD,GAfD;;AAiBA,EAAA,WAAW,CAAC,MAAZ,GAAqB,YAAW;AAC9B,IAAA,UAAU;AACV,IAAA,QAAQ,GAAG,SAAX;AACD,GAHD;;AAKA,EAAA,WAAW,CAAC,KAAZ,GAAoB,YAAW;AAC7B,IAAA,UAAU;AACV,IAAA,WAAW;AACX,WAAO,UAAP,CAH6B,CAGV;AACpB,GAJD;;AAMA,SAAO,WAAP;AACD,CAnHM,C","file":"throttle-exp.js","sourcesContent":["\nexport let throttleExp = function(fn, wait, options = {}) {\n  // eslint-disable-next-line consistent-this, babel/no-invalid-this\n  let _ = this;\n\n  _.defaults(options, {\n    leading: true,\n    trailing: true,\n    multiplier: 2,\n    divider: Infinity,\n    maxWait: Infinity\n  });\n\n  let timer;\n  let lastResult;\n  let lastCall;\n\n  let {\n    leading,\n    trailing,\n    multiplier,\n    divider,\n    maxWait\n  } = options;\n\n  let curWait;\n  let wasThrottled = false;\n\n  let invokeFn = function() {\n    let {\n      lastThis,\n      lastArgs\n    } = lastCall;\n\n    lastCall = undefined;\n\n    lastResult = fn.apply(lastThis, lastArgs);\n  };\n\n  let tryLeading = function() {\n    setTimer();\n    if (leading) {\n      invokeFn();\n    }\n  };\n\n  let tryTrailing = function() {\n    if (trailing && lastCall) {\n      setTimer();\n      invokeFn();\n    }\n  };\n\n  let clearTimer = function() {\n    if (!timer) {\n      return;\n    }\n\n    clearTimeout(timer);\n    timer = undefined;\n  };\n\n  let onTimer = function() {\n    clearTimer();\n    tryTrailing();\n  };\n\n  let setTimer = function() {\n    if (timer) {\n      return;\n    }\n\n    if (!curWait) {\n      curWait = wait; // first call\n    } else if (wasThrottled) {\n      curWait = curWait * multiplier;\n    } else {\n      curWait = curWait / divider;\n    }\n\n    wasThrottled = false;\n\n    curWait = _.clamp(curWait, wait, maxWait);\n\n    timer = setTimeout(onTimer, curWait);\n  };\n\n  let throttledFn = function(...args) {\n    lastCall = {\n      // eslint-disable-next-line babel/no-invalid-this\n      lastThis: this,\n      lastArgs: args\n    };\n\n    if (timer) {\n      wasThrottled = true;\n      return lastResult;\n    }\n\n    tryLeading();\n\n    return lastResult;\n  };\n\n  throttledFn.cancel = function() {\n    clearTimer();\n    lastCall = undefined;\n  };\n\n  throttledFn.flush = function() {\n    clearTimer();\n    tryTrailing();\n    return lastResult; // as per original _.debounce\n  };\n\n  return throttledFn;\n};\n"]}